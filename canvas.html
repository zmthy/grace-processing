<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Grace Processing</title>
    <style>
#draw { vertical-align: top; }
    </style>
    <script src="jquery-1.7.2.min.js"></script>
    <script src="processing-1.3.6-api.min.js"></script>
    <script src="minigrace.js" async></script>
    <script>
$(function() {
  window.processing = new Processing("draw", function () {});
  processing.methods = {};
  for (var name in processing) {
    processing.methods[name] = processing[name];
  }

  var mod = {};

  $("#code").keyup(function () {
    window.stdin_txt = {value: $(this).val()};
    window.stderr_txt = {value: ""};
    window.stdout_txt = {value: ""};

    try {
      gracecode_compiler.call(mod);
    } catch (e) {
      if (e !== "SystemExit") {
        document.write(e);
        throw e;
      }
    }

    eval(stdout_txt.value);
  });
});
    </script>
  </head>
  <body>
    <textarea id="code" cols="80" rows="50"></textarea>
    <canvas id="draw"/>
  </body>
</html>
